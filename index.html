<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Noor Clinic ‚Äî Alta de M√©dicos</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,400&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --azul-noor:    #0a2d6e;
    --azul-medio:   #1650b4;
    --azul-claro:   #2d7dd2;
    --azul-suave:   #ddeeff;
    --azul-hielo:   #f0f6ff;
    --dorado:       #c9a96e;
    --dorado-dark:  #a07535;
    --texto:        #0d1f3c;
    --gris:         #6b7a99;
    --blanco:       #ffffff;
    --borde:        #c4d4f0;
    --exito:        #1a7a4a;
    --error:        #c0392b;
  }
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: linear-gradient(160deg, #e8f0ff 0%, #f5f8ff 50%, #eef4ff 100%);
    min-height: 100vh;
    color: var(--texto);
  }

  /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
  header {
    background: var(--azul-noor);
    position: relative;
    overflow: hidden;
  }
  header::before {
    content: '';
    position: absolute; inset: 0;
    background:
      radial-gradient(ellipse 70% 100% at 90% 50%, rgba(22,80,180,.45) 0%, transparent 65%),
      radial-gradient(ellipse 40% 70% at 5% 0%,   rgba(45,125,210,.25) 0%, transparent 55%);
    pointer-events: none;
  }
  /* decorative grid lines */
  header::after {
    content: '';
    position: absolute; inset: 0;
    background-image:
      linear-gradient(rgba(255,255,255,.04) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255,255,255,.04) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
  }
  .header-inner {
    max-width: 1060px;
    margin: 0 auto;
    padding: 32px 40px 28px;
    display: flex;
    align-items: center;
    gap: 24px;
    position: relative;
    z-index: 1;
  }
  .logo-mark {
    width: 68px; height: 68px;
    border-radius: 14px;
    background: rgba(255,255,255,.10);
    border: 1.5px solid rgba(255,255,255,.28);
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0;
    box-shadow: 0 6px 28px rgba(0,0,0,.22), inset 0 1px 0 rgba(255,255,255,.15);
  }
  .logo-mark svg { width: 36px; height: 36px; }
  .header-copy { flex: 1; }
  .header-copy h1 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.95rem; font-weight: 500;
    color: var(--blanco); letter-spacing: .4px; line-height: 1.1;
  }
  .header-copy p {
    margin-top: 5px;
    font-size: .72rem; font-weight: 400;
    color: rgba(255,255,255,.5);
    letter-spacing: 1.2px; text-transform: uppercase;
  }
  .header-pill {
    background: rgba(201,169,110,.18);
    border: 1px solid rgba(201,169,110,.40);
    border-radius: 8px;
    padding: 10px 18px;
    text-align: right;
  }
  .header-pill span { display: block; font-size: .65rem; color: rgba(255,255,255,.45); letter-spacing: 1px; text-transform: uppercase; }
  .header-pill strong { font-size: .82rem; color: var(--dorado); font-weight: 500; }

  /* ‚îÄ‚îÄ STEPPER ‚îÄ‚îÄ */
  .stepper-wrap {
    background: rgba(10,45,110,.96);
    backdrop-filter: blur(4px);
    border-top: 1px solid rgba(255,255,255,.07);
    padding: 0 40px;
  }
  .stepper {
    max-width: 1060px;
    margin: 0 auto;
    display: flex;
  }
  .s-tab {
    flex: 1; padding: 13px 8px;
    cursor: default;
    text-align: center;
    position: relative;
    transition: all .3s;
  }
  .s-tab .s-num {
    display: inline-flex; align-items: center; justify-content: center;
    width: 24px; height: 24px;
    border-radius: 50%;
    font-size: .68rem; font-weight: 700;
    background: rgba(255,255,255,.10);
    color: rgba(255,255,255,.35);
    margin-bottom: 4px;
    transition: all .3s;
  }
  .s-tab .s-lbl {
    display: block;
    font-size: .62rem; font-weight: 600;
    letter-spacing: .7px; text-transform: uppercase;
    color: rgba(255,255,255,.3);
    transition: all .3s;
  }
  .s-tab.active  .s-num { background: var(--dorado); color: var(--azul-noor); }
  .s-tab.active  .s-lbl { color: rgba(255,255,255,.85); }
  .s-tab.done    .s-num { background: var(--azul-claro); color: #fff; }
  .s-tab.done    .s-lbl { color: rgba(255,255,255,.5); }
  .s-tab.active::after {
    content: '';
    position: absolute; bottom: 0; left: 50%;
    transform: translateX(-50%);
    width: 48px; height: 2px;
    background: var(--dorado); border-radius: 2px;
  }

  /* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
  main {
    max-width: 820px;
    margin: 36px auto 60px;
    padding: 0 20px;
  }

  .card {
    background: var(--blanco);
    border-radius: 18px;
    border: 1px solid var(--borde);
    box-shadow: 0 8px 48px rgba(10,45,110,.09), 0 1px 4px rgba(10,45,110,.06);
    overflow: hidden;
  }

  /* ‚îÄ‚îÄ SECCIONES ‚îÄ‚îÄ */
  .section { display: none; padding: 40px 48px; animation: upIn .35s ease; }
  .section.active { display: block; }
  @keyframes upIn {
    from { opacity: 0; transform: translateY(10px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .sec-header { margin-bottom: 28px; }
  .sec-header h2 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.6rem; font-weight: 500;
    color: var(--azul-noor);
  }
  .sec-header p {
    margin-top: 4px;
    font-size: .8rem; color: var(--gris); line-height: 1.5;
  }

  /* ‚îÄ‚îÄ CAMPOS ‚îÄ‚îÄ */
  .grid   { display: grid; grid-template-columns: 1fr 1fr; gap: 18px 22px; }
  .col-2  { grid-column: 1 / -1; }

  .field  { display: flex; flex-direction: column; gap: 5px; }
  .field label {
    font-size: .68rem; font-weight: 700;
    letter-spacing: .9px; text-transform: uppercase;
    color: var(--azul-noor);
  }
  .field label .req { color: var(--dorado); margin-left: 2px; }
  .field input,
  .field select,
  .field textarea {
    font-family: 'DM Sans', sans-serif;
    font-size: .875rem;
    padding: 11px 14px;
    border: 1.5px solid var(--borde);
    border-radius: 9px;
    color: var(--texto);
    background: var(--blanco);
    outline: none;
    transition: border-color .2s, box-shadow .2s;
    -webkit-appearance: none;
  }
  .field input:focus,
  .field select:focus { border-color: var(--azul-claro); box-shadow: 0 0 0 3px rgba(45,125,210,.11); }
  .field input.ok  { border-color: var(--exito); }
  .field input.err { border-color: var(--error); }
  .field .hint { font-size: .67rem; color: var(--gris); }
  .field .errtxt { font-size: .67rem; color: var(--error); display: none; }
  .field input.err ~ .errtxt { display: block; }

  /* ‚îÄ‚îÄ INFO BOX ‚îÄ‚îÄ */
  .infobox {
    background: var(--azul-suave);
    border-left: 3px solid var(--azul-claro);
    border-radius: 0 8px 8px 0;
    padding: 11px 15px;
    font-size: .77rem; color: var(--azul-noor); line-height: 1.55;
    margin-bottom: 22px;
  }
  .divider { height: 1px; background: linear-gradient(90deg,transparent,var(--borde),transparent); margin: 24px 0; }

  /* ‚îÄ‚îÄ DOCUMENTOS ‚îÄ‚îÄ */
  .docs-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }

  .doc-card {
    position: relative;
    border: 1.5px dashed var(--borde);
    border-radius: 12px;
    padding: 20px 14px 16px;
    text-align: center;
    cursor: pointer;
    transition: all .25s;
    background: var(--azul-hielo);
    overflow: hidden;
  }
  .doc-card:hover { border-color: var(--azul-claro); background: rgba(45,125,210,.04); }
  .doc-card.done  { border-style: solid; border-color: var(--exito); background: rgba(26,122,74,.04); }
  .doc-card input[type="file"] {
    position: absolute; inset: 0; opacity: 0; cursor: pointer; width: 100%; height: 100%;
  }
  .doc-icon { font-size: 1.9rem; display: block; margin-bottom: 6px; }
  .doc-tag {
    display: inline-block;
    font-size: .58rem; font-weight: 700; letter-spacing: .5px; text-transform: uppercase;
    padding: 2px 8px; border-radius: 20px;
    background: rgba(201,169,110,.15); color: #7a5523;
    margin-bottom: 6px;
  }
  .doc-tag.req-live { background: rgba(192,57,43,.10); color: #c0392b; }
  .doc-name { font-size: .74rem; font-weight: 600; color: var(--azul-noor); line-height: 1.3; margin-bottom: 4px; }
  .doc-status { font-size: .67rem; color: var(--gris); transition: color .2s; }
  .doc-card.done .doc-status { color: var(--exito); }

  /* ‚îÄ‚îÄ RESUMEN ‚îÄ‚îÄ */
  .resumen-box {
    background: var(--azul-hielo);
    border: 1px solid var(--borde);
    border-radius: 12px;
    padding: 22px 24px;
    margin-bottom: 20px;
  }
  .resumen-box h4 {
    font-size: .68rem; font-weight: 700; letter-spacing: .8px; text-transform: uppercase;
    color: var(--gris); margin-bottom: 14px;
  }
  .r-row {
    display: flex; justify-content: space-between; align-items: center;
    padding: 8px 0; border-bottom: 1px solid var(--borde);
    font-size: .81rem;
  }
  .r-row:last-child { border-bottom: none; }
  .r-key { color: var(--gris); }
  .r-val { color: var(--texto); font-weight: 500; max-width: 55%; text-align: right; }
  .ok-mark { color: var(--exito); }
  .warn-mark { color: #e67e22; }

  .acepta-wrap {
    display: flex; align-items: flex-start; gap: 11px;
    background: var(--azul-hielo);
    border: 1px solid var(--borde);
    border-radius: 10px;
    padding: 14px 16px;
  }
  .acepta-wrap input[type="checkbox"] {
    margin-top: 2px; accent-color: var(--azul-noor);
    width: 16px; height: 16px; flex-shrink: 0; cursor: pointer;
  }
  .acepta-wrap label { font-size: .77rem; color: var(--texto); line-height: 1.55; cursor: pointer; }

  /* ‚îÄ‚îÄ NAV ‚îÄ‚îÄ */
  .form-nav {
    display: flex; justify-content: space-between; align-items: center;
    padding: 18px 48px;
    background: var(--azul-hielo);
    border-top: 1px solid var(--borde);
  }
  .btn {
    font-family: 'DM Sans', sans-serif;
    font-size: .78rem; font-weight: 700;
    letter-spacing: .6px; text-transform: uppercase;
    padding: 11px 26px; border-radius: 9px;
    border: none; cursor: pointer; transition: all .2s;
  }
  .btn-primary { background: var(--azul-noor); color: #fff; }
  .btn-primary:hover { background: var(--azul-medio); transform: translateY(-1px); box-shadow: 0 4px 18px rgba(10,45,110,.28); }
  .btn-ghost { background: transparent; color: var(--gris); border: 1.5px solid var(--borde); }
  .btn-ghost:hover { border-color: var(--azul-claro); color: var(--azul-claro); }
  .btn-send { background: linear-gradient(135deg, var(--dorado), var(--dorado-dark)); color: #fff; }
  .btn-send:hover { transform: translateY(-1px); box-shadow: 0 4px 18px rgba(160,117,53,.38); }
  .btn:disabled { opacity: .45; cursor: not-allowed; transform: none !important; box-shadow: none !important; }
  .nav-step { font-size: .7rem; color: var(--gris); letter-spacing: .3px; }

  /* ‚îÄ‚îÄ LOADING ‚îÄ‚îÄ */
  .loading-overlay {
    display: none; position: fixed; inset: 0;
    background: rgba(10,45,110,.55); backdrop-filter: blur(4px);
    z-index: 999; align-items: center; justify-content: center;
    flex-direction: column; gap: 16px;
  }
  .loading-overlay.show { display: flex; }
  .spinner {
    width: 48px; height: 48px;
    border: 3px solid rgba(255,255,255,.2);
    border-top-color: var(--dorado);
    border-radius: 50%;
    animation: spin .8s linear infinite;
  }
  @keyframes spin { to { transform: rotate(360deg); } }
  .loading-overlay p { color: #fff; font-size: .85rem; letter-spacing: .5px; }

  /* ‚îÄ‚îÄ √âXITO ‚îÄ‚îÄ */
  .success-screen {
    display: none; padding: 56px 48px;
    text-align: center; animation: upIn .5s ease;
  }
  .success-screen.show { display: block; }
  .success-icon {
    width: 80px; height: 80px; border-radius: 50%;
    background: linear-gradient(135deg, var(--azul-noor), var(--azul-claro));
    display: flex; align-items: center; justify-content: center;
    margin: 0 auto 22px;
    font-size: 2rem;
    box-shadow: 0 10px 36px rgba(10,45,110,.28);
  }
  .success-screen h2 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2.1rem; font-weight: 500; color: var(--azul-noor); margin-bottom: 10px;
  }
  .success-screen p { font-size: .87rem; color: var(--gris); max-width: 430px; margin: 0 auto 28px; line-height: 1.65; }
  .folio-badge {
    display: inline-block;
    background: var(--azul-hielo); border: 1.5px solid var(--borde);
    border-radius: 10px; padding: 12px 32px; margin-bottom: 28px;
  }
  .folio-badge span { display: block; font-size: .62rem; color: var(--gris); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 3px; }
  .folio-badge strong { font-size: 1.25rem; color: var(--azul-noor); letter-spacing: 2px; font-weight: 700; }

  .success-checks {
    background: var(--azul-hielo); border-radius: 12px;
    border: 1px solid var(--borde);
    padding: 20px 24px; text-align: left; max-width: 400px; margin: 0 auto;
  }
  .success-checks h4 { font-size: .68rem; text-transform: uppercase; letter-spacing: .7px; color: var(--gris); margin-bottom: 12px; font-weight: 700; }
  .ck { display: flex; justify-content: space-between; padding: 7px 0; border-bottom: 1px solid var(--borde); font-size: .8rem; }
  .ck:last-child { border-bottom: none; }
  .ck .ck-ok { color: var(--exito); font-weight: 600; }

  /* ‚îÄ‚îÄ ERROR SCREEN ‚îÄ‚îÄ */
  .error-screen {
    display: none; padding: 48px;
    text-align: center; animation: upIn .4s ease;
  }
  .error-screen.show { display: block; }
  .error-screen h2 { font-family: 'Cormorant Garamond', serif; font-size: 1.7rem; color: var(--error); margin-bottom: 10px; }
  .error-screen p { font-size: .84rem; color: var(--gris); max-width: 420px; margin: 0 auto 24px; line-height: 1.6; }

  /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
  footer { text-align: center; padding: 22px; font-size: .7rem; color: var(--gris); }
  footer strong { color: var(--azul-noor); }

  @media (max-width: 640px) {
    .header-inner { padding: 22px 20px; gap: 14px; }
    .header-pill  { display: none; }
    .section      { padding: 26px 20px; }
    .form-nav     { padding: 14px 20px; }
    .grid, .docs-grid { grid-template-columns: 1fr; }
    .success-screen { padding: 36px 20px; }
  }
</style>
</head>
<body>

<!-- LOADING -->
<div class="loading-overlay" id="loading">
  <div class="spinner"></div>
  <p>Enviando tu informaci√≥n a Noor Clinic‚Ä¶</p>
</div>

<!-- HEADER -->
<header>
  <div class="header-inner">
    <div class="logo-mark">
      <!-- √çcono m√©dico/hospital -->
      <svg viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="14" y="2" width="8" height="32" rx="2" fill="rgba(255,255,255,0.9)"/>
        <rect x="2" y="14" width="32" height="8" rx="2" fill="rgba(255,255,255,0.9)"/>
      </svg>
    </div>
    <div class="header-copy">
      <h1>Noor Clinic</h1>
      <p>Sistema de Credencializaci√≥n ¬∑ Alta de M√©dicos</p>
    </div>
    <div class="header-pill">
      <span>Expediente Digital</span>
      <strong>2025 ¬∑ v2.0</strong>
    </div>
  </div>
</header>

<!-- STEPPER -->
<div class="stepper-wrap">
  <div class="stepper">
    <div class="s-tab active" data-s="1"><div class="s-num">1</div><span class="s-lbl">Datos Personales</span></div>
    <div class="s-tab"        data-s="2"><div class="s-num">2</div><span class="s-lbl">Datos Profesionales</span></div>
    <div class="s-tab"        data-s="3"><div class="s-num">3</div><span class="s-lbl">Documentaci√≥n</span></div>
    <div class="s-tab"        data-s="4"><div class="s-num">4</div><span class="s-lbl">Confirmar y Enviar</span></div>
  </div>
</div>

<main>
<div class="card">

  <!-- ‚ïê‚ïê PASO 1 ‚ïê‚ïê -->
  <div class="section active" id="s1">
    <div class="sec-header">
      <h2>Datos Personales</h2>
      <p>Informaci√≥n de identificaci√≥n del m√©dico que solicita alta en el hospital.</p>
    </div>
    <div class="grid">
      <div class="field col-2">
        <label>Nombre completo <span class="req">*</span></label>
        <input type="text" id="f_nombre" placeholder="Dr. Juan Alberto Ram√≠rez Soto"
               autocomplete="name" oninput="chk(this,'nombre')">
        <span class="errtxt">Escribe el nombre completo (m√≠n. 5 caracteres).</span>
      </div>
      <div class="field">
        <label>Fecha de nacimiento <span class="req">*</span></label>
        <input type="date" id="f_fnac" oninput="chk(this,'fecha')">
        <span class="errtxt">Selecciona una fecha v√°lida.</span>
      </div>
      <div class="field">
        <label>Correo electr√≥nico <span class="req">*</span></label>
        <input type="email" id="f_email" placeholder="medico@correo.com"
               autocomplete="email" oninput="chk(this,'email')">
        <span class="errtxt">Correo electr√≥nico inv√°lido.</span>
      </div>
      <div class="field">
        <label>Tel√©fono de contacto</label>
        <input type="tel" id="f_tel" placeholder="55 1234 5678" maxlength="15">
        <span class="hint">Opcional ‚Äî 10 d√≠gitos</span>
      </div>
      <div class="field">
        <label>Ciudad / Estado</label>
        <input type="text" id="f_ciudad" placeholder="Ciudad de M√©xico, CDMX">
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê PASO 2 ‚ïê‚ïê -->
  <div class="section" id="s2">
    <div class="sec-header">
      <h2>Datos Profesionales</h2>
      <p>Informaci√≥n de c√©dulas, especialidad y adscripci√≥n al hospital.</p>
    </div>
    <div class="infobox">
      üìã Verifica que los n√∫meros de c√©dula coincidan exactamente con tus documentos de la SEP y del Consejo de Especialidad.
    </div>
    <div class="grid">
      <div class="field col-2">
        <label>Especialidad m√©dica <span class="req">*</span></label>
        <select id="f_esp">
          <option value="">‚Äî Selecciona tu especialidad ‚Äî</option>
          <option>Anestesiolog√≠a</option><option>Cardiolog√≠a</option>
          <option>Cirug√≠a General</option><option>Cirug√≠a Pl√°stica y Reconstructiva</option>
          <option>Dermatolog√≠a</option><option>Endocrinolog√≠a</option>
          <option>Gastroenterolog√≠a</option><option>Geriatr√≠a</option>
          <option>Ginecolog√≠a y Obstetricia</option><option>Hematolog√≠a</option>
          <option>Infectolog√≠a</option><option>Medicina Interna</option>
          <option>Nefrolog√≠a</option><option>Neumolog√≠a</option>
          <option>Neurolog√≠a</option><option>Neurocirug√≠a</option>
          <option>Oftalmolog√≠a</option><option>Oncolog√≠a</option>
          <option>Ortopedia y Traumatolog√≠a</option><option>Otorrinolaringolog√≠a</option>
          <option>Pediatr√≠a</option><option>Psiquiatr√≠a</option>
          <option>Radiolog√≠a e Imagen</option><option>Reumatolog√≠a</option>
          <option>Urolog√≠a</option><option>Otra especialidad</option>
        </select>
      </div>
      <div class="field">
        <label>C√©dula profesional (m√©dico gral.) <span class="req">*</span></label>
        <input type="text" id="f_ced_prof" placeholder="12345678" maxlength="12"
               oninput="chk(this,'cedula')">
        <span class="hint">N√∫mero SEP ‚Äî medicina general</span>
        <span class="errtxt">C√©dula inv√°lida (m√≠n. 6 d√≠gitos).</span>
      </div>
      <div class="field">
        <label>C√©dula de especialidad <span class="req">*</span></label>
        <input type="text" id="f_ced_esp" placeholder="87654321" maxlength="12"
               oninput="chk(this,'cedula')">
        <span class="hint">N√∫mero SEP ‚Äî especialidad</span>
        <span class="errtxt">C√©dula inv√°lida (m√≠n. 6 d√≠gitos).</span>
      </div>
      <div class="field">
        <label>Tipo de adscripci√≥n <span class="req">*</span></label>
        <select id="f_adscripcion">
          <option value="">‚Äî Selecciona ‚Äî</option>
          <option>M√©dico de planta / tiempo completo</option>
          <option>M√©dico asociado / tiempo parcial</option>
          <option>M√©dico externo / honorarios</option>
          <option>M√©dico consultor</option>
        </select>
      </div>
      <div class="field">
        <label>Instituci√≥n (t√≠tulo / especialidad)</label>
        <input type="text" id="f_inst" placeholder="UNAM, IPN, Tec de Monterrey‚Ä¶">
      </div>
      <div class="field">
        <label>Vigencia ‚Äî Certificado de especialidad</label>
        <input type="date" id="f_vig_cert">
        <span class="hint">Fecha de vencimiento del certificado</span>
      </div>
      <div class="field">
        <label>Vigencia ‚Äî P√≥liza de Resp. Civil</label>
        <input type="date" id="f_vig_poliza">
        <span class="hint">Fecha de vencimiento de la p√≥liza</span>
      </div>
      <div class="field">
        <label>Aseguradora (Resp. Civil)</label>
        <input type="text" id="f_aseg" placeholder="GNP, AXA, Mapfre, HDI‚Ä¶">
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê PASO 3 ‚ïê‚ïê -->
  <div class="section" id="s3">
    <div class="sec-header">
      <h2>Carga de Documentos</h2>
      <p>Adjunta los 6 documentos obligatorios. Formatos: PDF, JPG o PNG ¬∑ M√°x. 10 MB c/u.</p>
    </div>
    <div class="infobox">
      üîí Tus archivos se almacenan de forma segura en Google Drive de Noor Clinic y solo el personal de Credencializaci√≥n tendr√° acceso.
    </div>
    <div class="docs-grid">
      <div class="doc-card" id="dc1">
        <input type="file" accept=".pdf,.jpg,.jpeg,.png" id="doc_ine"
               onchange="markDoc('dc1','dst1',this)">
        <span class="doc-icon">ü™™</span>
        <div class="doc-tag">Obligatorio</div>
        <p class="doc-name">Copia de INE<br>(Anverso y Reverso)</p>
        <span class="doc-status" id="dst1">Toca para seleccionar</span>
      </div>
      <div class="doc-card" id="dc2">
        <input type="file" accept=".pdf,.jpg,.jpeg,.png" id="doc_ced_prof"
               onchange="markDoc('dc2','dst2',this)">
        <span class="doc-icon">üéì</span>
        <div class="doc-tag">Obligatorio</div>
        <p class="doc-name">C√©dula Profesional<br>(M√©dico General)</p>
        <span class="doc-status" id="dst2">Toca para seleccionar</span>
      </div>
      <div class="doc-card" id="dc3">
        <input type="file" accept=".pdf,.jpg,.jpeg,.png" id="doc_ced_esp"
               onchange="markDoc('dc3','dst3',this)">
        <span class="doc-icon">üìú</span>
        <div class="doc-tag">Obligatorio</div>
        <p class="doc-name">C√©dula de Especialidad<br>(SEP)</p>
        <span class="doc-status" id="dst3">Toca para seleccionar</span>
      </div>
      <div class="doc-card" id="dc4">
        <input type="file" accept=".pdf,.jpg,.jpeg,.png" id="doc_cert"
               onchange="markDoc('dc4','dst4',this)">
        <span class="doc-icon">üèÖ</span>
        <div class="doc-tag req-live">Obligatorio ¬∑ Vigente</div>
        <p class="doc-name">Certificado de<br>Especialidad (Vigente)</p>
        <span class="doc-status" id="dst4">Toca para seleccionar</span>
      </div>
      <div class="doc-card" id="dc5">
        <input type="file" accept=".pdf,.jpg,.jpeg,.png" id="doc_poliza"
               onchange="markDoc('dc5','dst5',this)">
        <span class="doc-icon">üõ°Ô∏è</span>
        <div class="doc-tag req-live">Obligatorio ¬∑ Vigente</div>
        <p class="doc-name">P√≥liza de Responsabilidad<br>Civil (Vigente)</p>
        <span class="doc-status" id="dst5">Toca para seleccionar</span>
      </div>
      <div class="doc-card" id="dc6">
        <input type="file" accept=".pdf,.jpg,.jpeg,.png" id="doc_fiscal"
               onchange="markDoc('dc6','dst6',this)">
        <span class="doc-icon">üßæ</span>
        <div class="doc-tag req-live">Obligatorio ¬∑ Actualizada</div>
        <p class="doc-name">Constancia de Situaci√≥n<br>Fiscal (SAT ¬∑ Actualizada)</p>
        <span class="doc-status" id="dst6">Toca para seleccionar</span>
      </div>
    </div>
    <div class="divider"></div>
    <p style="font-size:.72rem;color:var(--gris);line-height:1.7;">
      <strong style="color:var(--azul-noor);">Nota:</strong> Los documentos se enviar√°n junto con tus datos al momento de hacer clic en <em>"Enviar Solicitud"</em>.
      Los nombres de los archivos se registrar√°n autom√°ticamente en la base de datos del hospital.
    </p>
  </div>

  <!-- ‚ïê‚ïê PASO 4 ‚ïê‚ïê -->
  <div class="section" id="s4">
    <div class="sec-header">
      <h2>Confirmaci√≥n y Env√≠o</h2>
      <p>Revisa tu informaci√≥n. Al enviar, los datos se registrar√°n autom√°ticamente en la base de datos del hospital.</p>
    </div>
    <div class="resumen-box" id="resumen">
      <h4>Resumen del Expediente</h4>
      <div class="r-row"><span class="r-key">Nombre completo</span><span class="r-val" id="r_nombre">‚Äî</span></div>
      <div class="r-row"><span class="r-key">Fecha de nacimiento</span><span class="r-val" id="r_fnac">‚Äî</span></div>
      <div class="r-row"><span class="r-key">Correo electr√≥nico</span><span class="r-val" id="r_email">‚Äî</span></div>
      <div class="r-row"><span class="r-key">Especialidad</span><span class="r-val" id="r_esp">‚Äî</span></div>
      <div class="r-row"><span class="r-key">C√©dula profesional</span><span class="r-val" id="r_ced">‚Äî</span></div>
      <div class="r-row"><span class="r-key">C√©dula especialidad</span><span class="r-val" id="r_cedesp">‚Äî</span></div>
      <div class="r-row"><span class="r-key">Documentos adjuntos</span><span class="r-val" id="r_docs">‚Äî</span></div>
    </div>
    <div class="acepta-wrap">
      <input type="checkbox" id="acepta">
      <label for="acepta">
        Declaro que la informaci√≥n y documentos son <strong>aut√©nticos, vigentes y completos</strong>.
        Autorizo a <strong>Noor Clinic</strong> a resguardar mis datos conforme a la
        <em>Ley Federal de Protecci√≥n de Datos Personales (LFPDPPP)</em>.
      </label>
    </div>
  </div>

  <!-- ‚ïê‚ïê √âXITO ‚ïê‚ïê -->
  <div class="success-screen" id="success">
    <div class="success-icon">‚úÖ</div>
    <h2>¬°Solicitud Enviada!</h2>
    <p>Tu expediente ha sido registrado en la base de datos de Noor Clinic. El equipo de Credencializaci√≥n lo revisar√° y te contactar√° en <strong>3 a 5 d√≠as h√°biles</strong>.</p>
    <div class="folio-badge">
      <span>N√∫mero de Folio</span>
      <strong id="folio_show">NC-2025-0000</strong>
    </div>
    <div class="success-checks">
      <h4>Documentos recibidos</h4>
      <div class="ck"><span>Copia de INE</span><span class="ck-ok">‚úì Recibido</span></div>
      <div class="ck"><span>C√©dula Profesional</span><span class="ck-ok">‚úì Recibido</span></div>
      <div class="ck"><span>C√©dula de Especialidad</span><span class="ck-ok">‚úì Recibido</span></div>
      <div class="ck"><span>Certificado de Especialidad</span><span class="ck-ok">‚úì Recibido</span></div>
      <div class="ck"><span>P√≥liza de Resp. Civil</span><span class="ck-ok">‚úì Recibido</span></div>
      <div class="ck"><span>Constancia Fiscal SAT</span><span class="ck-ok">‚úì Recibido</span></div>
    </div>
  </div>

  <!-- ‚ïê‚ïê ERROR ‚ïê‚ïê -->
  <div class="error-screen" id="errorScreen">
    <div style="font-size:2.5rem;margin-bottom:16px;">‚ö†Ô∏è</div>
    <h2>Error al enviar</h2>
    <p id="errorMsg">Hubo un problema al conectar con el servidor. Por favor verifica tu conexi√≥n e intenta de nuevo.</p>
    <button class="btn btn-primary" onclick="retrySubmit()" style="margin-top:16px;">Reintentar</button>
  </div>

  <!-- NAV -->
  <div class="form-nav" id="fnav">
    <button class="btn btn-ghost" id="btnBack" onclick="prev()" style="visibility:hidden">‚Üê Anterior</button>
    <span class="nav-step" id="navInfo">Paso 1 de 4</span>
    <button class="btn btn-primary" id="btnNext" onclick="next()">Siguiente ‚Üí</button>
  </div>

</div><!-- .card -->
</main>

<footer>
  <strong>Noor Clinic</strong> ¬∑ Sistema de Credencializaci√≥n de M√©dicos ¬∑ 2025<br>
  Datos protegidos conforme a la LFPDPPP ¬∑ Todos los derechos reservados
</footer>

<script>
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// ‚öôÔ∏è  CONFIGURACI√ìN ‚Äî PEGA AQU√ç TU WEB APP URL
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxMSljcLWK9km8n_rNpKgMvqD20XlUSK_d4vOTb1bIq6oYQHebeJD64QLA3KYBoV3O9/exec";
// Instrucciones para obtenerla: ver archivo GUIA_GOOGLE_SHEETS.html
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

let step = 1;
const TOTAL = 4;

function next() {
  if (!validate(step)) return;
  if (step === TOTAL) { submit(); return; }
  if (step === TOTAL - 1) buildResumen();
  moveTo(step + 1);
}
function prev() { if (step > 1) moveTo(step - 1); }

function moveTo(n) {
  document.getElementById('s' + step)?.classList.remove('active');
  document.querySelectorAll('.s-tab').forEach(t => {
    const s = +t.dataset.s;
    t.classList.remove('active', 'done');
    if (s < n) t.classList.add('done');
    if (s === n) t.classList.add('active');
  });
  step = n;
  document.getElementById('s' + step)?.classList.add('active');
  document.getElementById('navInfo').textContent = `Paso ${step} de ${TOTAL}`;
  document.getElementById('btnBack').style.visibility = step > 1 ? 'visible' : 'hidden';
  const nb = document.getElementById('btnNext');
  if (step === TOTAL) { nb.textContent = 'Enviar Solicitud ‚úì'; nb.className = 'btn btn-send'; }
  else                { nb.textContent = 'Siguiente ‚Üí';        nb.className = 'btn btn-primary'; }
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* ‚îÄ‚îÄ Validaci√≥n ‚îÄ‚îÄ */
function v(id) { return (document.getElementById(id)?.value || '').trim(); }
function validate(s) {
  if (s === 1) {
    let ok = true;
    ok = require('f_nombre', n => n.length >= 5)   && ok;
    ok = require('f_email',  n => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)) && ok;
    ok = require('f_fnac',   n => n.length > 0)    && ok;
    return ok;
  }
  if (s === 2) {
    let ok = true;
    ok = require('f_esp',      n => n.length > 0)  && ok;
    ok = require('f_ced_prof', n => n.length >= 6) && ok;
    ok = require('f_ced_esp',  n => n.length >= 6) && ok;
    return ok;
  }
  if (s === 4) {
    if (!document.getElementById('acepta').checked) {
      alert('Por favor acepta la declaraci√≥n para continuar.'); return false;
    }
  }
  return true;
}
function require(id, fn) {
  const el = document.getElementById(id);
  const val = (el?.value || '').trim();
  const ok = fn(val);
  el?.classList.toggle('err', !ok);
  el?.classList.toggle('ok',  ok && val.length > 0);
  return ok;
}

/* ‚îÄ‚îÄ Validaci√≥n en tiempo real ‚îÄ‚îÄ */
function chk(el, type) {
  const v = el.value.trim();
  let ok = false;
  if (type === 'nombre') ok = v.length >= 5;
  if (type === 'email')  ok = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);
  if (type === 'cedula') ok = v.length >= 6;
  if (type === 'fecha')  ok = v.length > 0;
  el.classList.toggle('err', !ok);
  el.classList.toggle('ok',  ok);
}

/* ‚îÄ‚îÄ Documentos ‚îÄ‚îÄ */
function markDoc(cardId, statusId, input) {
  const file = input.files[0];
  if (!file) return;
  if (file.size > 10 * 1024 * 1024) {
    document.getElementById(statusId).textContent = '‚ö† Archivo muy grande (m√°x. 10 MB)';
    input.value = ''; return;
  }
  document.getElementById(cardId).classList.add('done');
  const kb = (file.size / 1024).toFixed(0);
  const name = file.name.length > 24 ? file.name.substring(0, 22) + '‚Ä¶' : file.name;
  document.getElementById(statusId).textContent = `‚úì ${name} (${kb} KB)`;
}

/* ‚îÄ‚îÄ Resumen ‚îÄ‚îÄ */
function buildResumen() {
  const fmt = id => v(id) || '‚Äî';
  document.getElementById('r_nombre').textContent  = fmt('f_nombre');
  document.getElementById('r_email').textContent   = fmt('f_email');
  document.getElementById('r_esp').textContent     = document.getElementById('f_esp')?.value || '‚Äî';
  document.getElementById('r_ced').textContent     = fmt('f_ced_prof');
  document.getElementById('r_cedesp').textContent  = fmt('f_ced_esp');
  const fn = v('f_fnac');
  document.getElementById('r_fnac').textContent    = fn ? fn.split('-').reverse().join('/') : '‚Äî';
  const n = [1,2,3,4,5,6].filter(i => document.getElementById('dc'+i)?.classList.contains('done')).length;
  const el = document.getElementById('r_docs');
  el.innerHTML = n === 6
    ? `<span class="ok-mark">‚úì 6/6 documentos adjuntos</span>`
    : `<span class="warn-mark">‚ö† ${n}/6 documentos adjuntos</span>`;
}

/* ‚îÄ‚îÄ Env√≠o a Google Sheets ‚îÄ‚îÄ */
async function submit() {
  document.getElementById('loading').classList.add('show');

  const folio = 'NC-' + new Date().getFullYear() + '-' + String(Math.floor(Math.random() * 9000) + 1000);
  const ahora = new Date().toLocaleString('es-MX', { timeZone: 'America/Mexico_City' });

  // Recopilar nombres de archivos adjuntos
  const docNames = {
    ine:           document.getElementById('doc_ine')?.files[0]?.name      || 'No adjunto',
    cedula_prof:   document.getElementById('doc_ced_prof')?.files[0]?.name || 'No adjunto',
    cedula_esp:    document.getElementById('doc_ced_esp')?.files[0]?.name  || 'No adjunto',
    certificado:   document.getElementById('doc_cert')?.files[0]?.name     || 'No adjunto',
    poliza_rc:     document.getElementById('doc_poliza')?.files[0]?.name   || 'No adjunto',
    const_fiscal:  document.getElementById('doc_fiscal')?.files[0]?.name   || 'No adjunto',
  };

  const payload = {
    folio,
    fecha_registro:   ahora,
    nombre_completo:  v('f_nombre'),
    fecha_nacimiento: v('f_fnac'),
    email:            v('f_email'),
    telefono:         v('f_tel'),
    ciudad:           v('f_ciudad'),
    especialidad:     document.getElementById('f_esp')?.value   || '',
    cedula_prof:      v('f_ced_prof'),
    cedula_esp:       v('f_ced_esp'),
    institucion:      v('f_inst'),
    adscripcion:      document.getElementById('f_adscripcion')?.value || '',
    vigencia_cert:    v('f_vig_cert'),
    vigencia_poliza:  v('f_vig_poliza'),
    aseguradora:      v('f_aseg'),
    estado:           'Pendiente',
    doc_ine:          docNames.ine,
    doc_cedula_prof:  docNames.cedula_prof,
    doc_cedula_esp:   docNames.cedula_esp,
    doc_certificado:  docNames.certificado,
    doc_poliza:       docNames.poliza_rc,
    doc_fiscal:       docNames.const_fiscal,
  };

  try {
    const resp = await fetch(APPS_SCRIPT_URL, {
      method: 'POST',
      mode: 'no-cors',             // requerido por Google Apps Script
      headers: { 'Content-Type': 'text/plain' },
      body: JSON.stringify(payload)
    });

    // no-cors no devuelve cuerpo; asumimos √©xito si no hay excepci√≥n
    document.getElementById('loading').classList.remove('show');
    showSuccess(folio);

  } catch (err) {
    document.getElementById('loading').classList.remove('show');
    showError('No se pudo conectar con el servidor. Verifica tu conexi√≥n a internet e int√©ntalo de nuevo.');
    console.error(err);
  }
}

function retrySubmit() {
  document.getElementById('errorScreen').classList.remove('show');
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById('s' + step).classList.add('active');
  document.getElementById('fnav').style.display = '';
}

function showSuccess(folio) {
  document.getElementById('folio_show').textContent = folio;
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById('success').classList.add('show');
  document.getElementById('fnav').style.display = 'none';
  document.querySelectorAll('.s-tab').forEach(t => t.classList.add('done'));
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function showError(msg) {
  document.getElementById('errorMsg').textContent = msg;
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById('errorScreen').classList.add('show');
  document.getElementById('fnav').style.display = 'none';
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
</script>
</body>
</html>
